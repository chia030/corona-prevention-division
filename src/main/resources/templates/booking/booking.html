<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SARS-CoV-2 PCR test</title>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="/resources/demos/style.css">
    <link rel="stylesheet" href="/booking-style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="/permanent.js"></script>
    <script>
        $( function() {
            $( "#datepicker" ).datepicker({
                dateFormat: "yy-mm-dd",
                firstDay: 1,
                minDate: 1,
                maxDate: "+1m"
            });
        } );
        // Something like this will deactivate certain dates depending on the center capacity! ->
        // $('input').datepicker({
        //     beforeShowDay: function(date){
        //         var string = jQuery.datepicker.formatDate('yy-mm-dd', date);
        //         return [$.inArray(string, array) == -1];
        //     }
        // });
    </script>
</head>
<body>
<!--nav bar:-->
<div class="topnav"></div>
    <!--Header-->
    <div>
        <h1>
            Book a PCR test
        </h1>
    </div>

<!--Select center-->
<div>
    <form th:action="@{select-center}" method="post">
        <script>
            function updateGoogleMaps(){
                console.log([].filter.call(document.querySelectorAll('option'), (e) => e.selected)[0].value);
                document.getElementById("google-maps").src = [].filter.call(document.querySelectorAll('option'), (e) => e.selected)[0].value;
            }
        </script>
        <select id="select-google-maps" name="center" onchange="updateGoogleMaps()">
            <option value="null" disabled>Please select a center...</option>
            <option th:each="center : ${centers}" th:value="${center.getAddress().getGoogleMapsLink()}" th:text="${center.address}">
            </option>
        </select>
        <button type="submit">Select center</button>

        <!--Google Maps Embed-->
        <div style="margin:20px;">
            <iframe id="google-maps" src="https://googlemaps.com/" width="300" height="225" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
        </div>
    </form>

</div>

    <!--Select date and time-->
    <div>
        <h2>Pick a date</h2>
        <p>Date: <input type="text" id="datepicker"></p>
        <h2>Pick a time</h2>
        <select name="times-dropdown">
<!--            <option th:each="testCenter : ${testCenters}" th:value="${testCenter.address}" th:text="${testCenter.address}">-->
<!--            </option>-->
        </select>
    </div>

<!--Select date and time-->
<div></div>

<!--Enter credentials-->
<div>
    <form th:action="@{send-confirmation}">
        <label>CPR number:</label>
        <input type="number" th:name="cpr" />
        <label>First name:</label>
        <input type="text" th:name="firstName" />
        <label>Last name:</label>
        <input type="text" th:name="lastName" />
        <label>Email address:</label>
        <input type="text" th:name="email" />
        <button type="submit" />
    </form>
</div>

</body>
</html>